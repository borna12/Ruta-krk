<!DOCTYPE html>
<html>
<head>
  <title>Planinarska ruta Krk</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; }
    .leaflet-routing-container { display: none; } /* skriva routing panel */
  </style>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.5.1/gpx.min.js"></script>
 <link rel="icon" type="image/png" href="./favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>
<body>

<div id="map"></div>
<div id="route-info" class="leaflet-control route-info"></div>


    <script src="js/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="css/sweetalert2.min.css">
  <link rel="stylesheet" href="css/stil.css" />


<script>
const map = L.map('map').setView([45.077, 14.6], 11);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: ' <a href="https://stin.hr/" target="_blank"><img src="https://stin.hr/wp-content/uploads/2021/02/cropped-zaposlenici-18-192x192.png" alt="Staroslavenski institut" style="height: 14px; vertical-align: middle;"> Staroslavenski institut</a>'
}).addTo(map);
map.attributionControl.setPrefix('Leaflet | Â© <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a>');

const RouteSelectorControl = L.Control.extend({
  onAdd: function(map) {
    const div = L.DomUtil.create('div', 'leaflet-control route-select');
    div.innerHTML = `
      <select id="routeSelector">
        <option value="ruta-planinarenje.gpx">PjeÅ¡ke</option>
        <option value="ruta-bicikl.gpx">Bicikl</option>
        <option value="ruta-auto.gpx">Auto</option>
      </select>
    `;
    L.DomEvent.disableClickPropagation(div);
    return div;
  }
});
map.addControl(new RouteSelectorControl({ position: 'topright' }));
// ToÄke s opisima
const points = [
  {name: "Å½upna crkva Uznesenja BlaÅ¾ene Djevice Marije", lat: 45.21284, lon: 14.55371, desc: '<p>OmiÅ¡alj je mjesto nekoliko glagoljiÄnih spomenika. Å½upna crkva Uznesenja BlaÅ¾ene Djevice Marije, trobrodna romaniÄka crkva s prijelaza iz 12. u 13. st. mjesto je nekoliko glagoljiÄnih natpisa koji svjedoÄe o gradnji pojedinih njezinih dijelova. Na renesansnome zvoniku dovrÅ¡enome 1536. godine takoÄ‘er je glagoljiÄni natpis. </p><p>U OmiÅ¡lju se nalazi i lapidarij  u kojemu su i neki glagoljiÄni natpisi. IstiÄe se nadgrobna ploÄa s glagoljiÄnim natpisom i reljefnim prikazom znakova opatske Äasti iz 1477.</p><figure><img alt="GlagoljiÄni natpis o gradnji KaÅ¡tela u OmiÅ¡lju"src=slike/omisalj-1.jpg><figcaption>GlagoljiÄni natpis o gradnji KaÅ¡tela u OmiÅ¡lju</figcaption></figure><figure><img alt="GlagoljiÄni natpisi u OmiÅ¡lju"src=slike/omisalj-2.jpg> <img alt="GlagoljiÄni natpisi u OmiÅ¡lju"src=slike/omisalj-3.jpg><figcaption>GlagoljiÄni natpisi u OmiÅ¡lju</figcaption></figure><figure><img alt="Rozeta Å¾upne crkve s glagoljiÄnim natpisom"src=slike/omisalj-4.jpg><figcaption>Rozeta Å¾upne crkve s glagoljiÄnim natpisom</figcaption></figure>'},
  {name: "Samostan sv. Marije Magdalene u Poratu", lat: 45.12353, lon: 14.49353, desc: "<p>U Portu se nalazi franjevaÄki Samostan sv. Marije Magdalene, Äija knjiÅ¾nica Äuva niz glagoljiÄnih rukopisa iz 17. i 18. stoljeÄ‡a. U otvorenome predvorju nalazi se glagoljiÄni lapidarij koji je osmislio DubaÅ¡ljanin Branko FuÄiÄ‡, jedan od najpoznatijih prouÄavatelja hrvatskoga glagoljaÅ¡tva. Ispred samostana postavljena je njegova bista. Lapidarij sadrÅ¾ava 14 odljeva najvaÅ¾nijih i najpoznatijih glagoljiÄnih epigrafskih spomenika.</p><figure><img alt='Lapidarij u Samostanu sv. Marije Magdalene u Portu' src=slike/porat-1.jpg><figcaption>Lapidarij u Samostanu sv. Marije Magdalene u Portu</figcaption></figure><figure><img alt='Bista Branka FuÄiÄ‡a' src=slike/porat-2.jpg><figcaption>Bista Branka FuÄiÄ‡a</figcaption></figure>"},
  {name: "Samostan sv. Marije u Glavotoku", lat: 45.09128, lon: 14.43428, desc: "<p>U Glavotoku se nalazi Samostan sv. Marije, samostan franjevaca treÄ‡oredaca. U samostanu se Äuvao i jedan primjerak <em>Prvotiska</em>, koji se danas Äuva u Zagrebu, u samostanu na Ksaveru. Na samostanu se nalazi sunÄani sat koji je izradio vaÅ¾an hrvatski glagoljaÅ¡ Dragutin Antun ParÄiÄ‡. U samostanu je bila i ParÄiÄ‡eva tiskara.</p><figure><img alt='Samostan sv. Marije u Glavotoku' src=slike/glavotoku-1.jpg><br><img alt='Samostan sv. Marije u Glavotoku' src=slike/glavotoku-2.jpg><figcaption>Samostan sv. Marije u Glavotoku</figcaption></figure><figure><img alt='SunÄani sat koji je izradio Dragutin Antun ParÄiÄ‡' src=slike/glavotoku-3.jpg><figcaption>SunÄani sat koji je izradio Dragutin Antun ParÄiÄ‡</figcaption></figure>"},
  {name: "KrÄki natpis - kanoniÄka kuÄ‡a", lat: 45.02657, lon: 14.57521, desc: "<p><em>KrÄki natpis</em> jedan je od najstarijih hrvatskoglagoljiÄnih epigrafskih spomenika. Datira se u 11. stoljeÄ‡e. Na kamenu su uklesana imena graditelja benediktinskoga samostana ili crkve: opat Maj i slavenski redovnici Radonja, Dobroslav, Rugota (tekst glasi:Â <em>se zida maÄµÑŠ opatÑŠ i radonÃª rugota dobroslav[ÑŠ]</em>). Natpis se nalazi na stubiÅ¡tu kanoniÄke kuÄ‡e u Krku (Ulica dr. Dinka ViteziÄ‡a 7, pribliÅ¾ne koordinate: 45.026566734127165, 14.575205164180534). Godine 1902. u Krku je osnovana Staroslavenska akademija. ZaÄetnik je akademije bio Antun MahniÄ‡. U Krku se u biskupskoj palaÄi nalazila i tiskara Kurykta (koordinate: 45.02559360895806, 14.575664918434729), u kojoj je tiskan Vjesnik Staroslavenske akademije. Tiskaru je 1899. takoÄ‘er osnovao Antun MahniÄ‡.</p><figure><img alt='KrÄki natpis' src=slike/krk-1.jpg><figcaption>KrÄki natpis</figcaption></figure><br><figure><img alt='KrÄki natpis' src=slike/krk-2.jpg><figcaption><p>Tiskara Kurykta â€“ slika preuzeta sa stranice <a href='https://www.adriaforum.com/kroatien/threads/2337-krk-stadt-tiskara-kurykta-bisch%C3%B6ftliche-druckerei.84421/'>https://www.adriaforum.com/kroatien/threads/2337-krk-stadt-tiskara-kurykta-bisch%C3%B6ftliche-druckerei.84421/</a></p></figcaption></figure>"},
  {name: "Otok KoÅ¡ljun", lat: 45.02605, lon: 14.61945, desc: "KoÅ¡ljun je otoÄiÄ‡ koji se nalazi ispred mjesta Punat. Premda otoÄiÄ‡ KoÅ¡ljun nije bio glagoljaÅ¡ki, na njemu se Äuva primjerak <em>Prvotiska. </em>Na njemu se nalazi franjevaÄki samostan.<br><figure><img alt='Otok KoÅ¡ljun' src=slike/kosljun-1.jpg><figcaption>Â OtoÄiÄ‡ KoÅ¡ljun â€“ slika preuzeta sa stranice <a href='https://www.info-krk.com/krk/kultura/73/kosljun'>https://www.info-krk.com/krk/kultura/73/kosljun</a></figcaption></figure>"},
  {name: "Crkva sv. Lucije u Jurandvoru", lat: 44.97791, lon: 14.73826, desc: "<p>U mjestu Jurandvor, u crkvici sv. Lucije nalazila se <em>BaÅ¡Ä‡anska ploÄa </em>â€“ najvaÅ¾niji i jedan od najstarijih hrvatskoglagoljiÄnih epigrafskih spomenika. Pisana je prijelaznim tipom glagoljice s oble na uglatu. SluÅ¾ila je kao lijevi plutej u crkvenoj pregradi. Natpis ima 13 redova, poÄinje invokacijom, a zatim slijedi zapis popa DrÅ¾ihe o tome da je kralj Zvonimir darovao ledinu crkvi sv. Lucije. Navode se i svjedoci toga darivanja. Nakon toga opat Dobrovit svjedoÄi kako je s devetoro braÄ‡e zidao crkvu u vrijeme kneza Kosmata. Na ploÄi se prvi put na hrvatskome jeziku spominje ime kralja Zvonimira i hrvatskoga naroda. Danas se <em>BaÅ¡Ä‡anska ploÄa</em> Äuva u atriju Hrvatske akademije znanosti i umjetnosti u Zagrebu.</p><figure><img alt='BaÅ¡Ä‡anska ploÄa' src=slike/jurandvor-1.jpg><figcaption>BaÅ¡Ä‡anska ploÄa</figcaption></figure><figure><img alt='Crkvica sv. Lucije u Jurandvoru' src=slike/jurandvor-2.jpg><figcaption>Crkvica sv. Lucije u Jurandvoru</figcaption></figure><figure><img alt='GlagoljiÄno slovo s u Jurandvoru' src=slike/jurandvor-3.jpg><figcaption>GlagoljiÄno slovo <em>s </em>u Jurandvoru</figcaption></figure>"},
  {name: "BaÅ¡Ä‡anska staza glagoljice", lat: 44.96163, lon: 14.74718, desc: "BaÅ¡Ä‡anska staza glagoljice sastoji se od 34 spomenika od prijevoja Treskavac kroz BaÅ¡Ä‡ansku dolinu. Izradu staze pokrenulo je DruÅ¡tvo Sinjali. Staza je otvorena 2009.<figure><img alt='GlagoljiÄno slovo a'src=slike/bascanska-staza-1.jpg><figcaption>GlagoljiÄno slovo <em>a</em></figcaption></figure><figure><img alt='GlagoljiÄna slova Å¾ i e'src=slike/bascanska-staza-2.jpg><figcaption>GlagoljiÄna slova <em>Å¾ </em>i <em>e</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo l'src=slike/bascanska-staza-3.jpg><figcaption>GlagoljiÄno slovo <em>l</em></figcaption></figure><figure><img alt='GlagoljiÄna slova k i d'src=slike/bascanska-staza-4.jpg><figcaption>GlagoljiÄna slova <em>k </em>i <em>d</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo b'src=slike/bascanska-staza-5.jpg><figcaption>GlagoljiÄno slovo <em>b</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo o'src=slike/bascanska-staza-6.jpg><figcaption>GlagoljiÄno slovo <em>o</em></figcaption></figure><figure><img alt='Spomenik DruÅ¡tvu Sinjali'src=slike/bascanska-staza-7.jpg><figcaption>Spomenik DruÅ¡tvu Sinjali, koje je pokrenulo stazu</figcaption></figure><figure><img alt='GlagoljiÄno slovo v'src=slike/bascanska-staza-8.jpg><figcaption>GlagoljiÄno slovo <em>v</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo p'src=slike/bascanska-staza-9.jpg><figcaption>GlagoljiÄno slovo <em>p</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo h'src=slike/bascanska-staza-10.jpg><figcaption>GlagoljiÄno slovo <em>h</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo z'src=slike/bascanska-staza-11.jpg><figcaption>GlagoljiÄno slovo <em>z</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo n'src=slike/bascanska-staza-12.jpg><figcaption>GlagoljiÄno slovo <em>n</em></figcaption></figure><figure><img alt='GlagoljiÄno slovo Å¡'src=slike/bascanska-staza-13.jpg><figcaption>GlagoljiÄno slovo <em>Å¡</em></figcaption></figure>"},
  {name: "Vrbnik", lat: 45.07704747366301, lon: 14.677571209700712, desc: "<p>U Vrbniku je viÅ¡e glagoljiÄnih natpisa, primjerice, na kapelici sv. Marije Male ili BlaÅ¾ene Djevice Marije od PoroÄ‘enja uz Å¾upnu crkvu uznesenja BlaÅ¾ene Djevice Marije nalazi se glagoljiÄni natpis iz 1505. o izgradnji crkve. U Vrbniku se nalazi i kip poznatoga glagoljaÅ¡a BlaÅ¾a BaromiÄ‡a . Godine 2003. otvorena je spomen-tiskara BlaÅ¾a BaromiÄ‡a i Dragutina ParÄiÄ‡a. U Å½upnome uredu nalaze se vaÅ¾ni glagoljiÄni rukopisi â€“ primjerice, vrbniÄki misali i brevijari.</p><figure><img alt='GlagoljiÄni natpisi u Vrbniku'src=slike/vrbnik-1.jpg><figcaption>GlagoljiÄni natpisi u Vrbniku</figcaption></figure><figure><img alt='GlagoljiÄni spomenici u Vrbniku'src=slike/vrbnik-2.jpg><br><img alt='GlagoljiÄni spomenici u Vrbniku'src=slike/vrbnik-3.jpg><br><img alt='GlagoljiÄni spomenici u Vrbniku'src=slike/vrbnik-4.jpg><br><img alt='GlagoljiÄni spomenici u Vrbniku'src=slike/vrbnik-5.jpg><figcaption>GlagoljiÄni spomenici u Vrbniku</figcaption></figure><figure><img alt='BlaÅ¾ BaromiÄ‡'src=slike/vrbnik-6.jpg><figcaption>BlaÅ¾ BaromiÄ‡</figcaption></figure>"},
  {name: "Dobrinj", lat: 45.12602, lon: 14.61343, desc: "U crkvi sv. Vida nema glagoljice, ali je s njom povezana glagoljiÄna <em>Darovnica slavnoga Dragoslava</em>, jedan od najvaÅ¾nijih starohrvatskih diplomatiÄkih zapisa, koji je napisan kurzivnom glagoljicom. GlagoljiÄni se natpisi nalaze na Å¾upnoj crkvi sv. Stjepana i u gradu. Prvi prijepis <em>Darovnice</em> Äuva se u sakralnoj muzejskoj zbirci u Dobrinju, koja je otvorena 1981.<figure><img alt='crkva sv. Vida 'src=slike/dobrinj-1.jpg><br><img alt='crkva sv. Vida'src=slike/dobrinj-2.jpg><figcaption>crkva sv. Vida</figcaption></figure><figure><img alt='GlagoljiÄni natpis na Å¾upnoj crkvi sv. Stjepana u Dobrinju'src=slike/dobrinj-3.jpg><figcaption>GlagoljiÄni natpis na Å¾upnoj crkvi sv. Stjepana u Dobrinju</figcaption></figure><figure><img alt='GlagoljiÄni natpis u Dobrinju'src=slike/dobrinj-4.jpg><figcaption>GlagoljiÄni natpis u Dobrinju</figcaption></figure><figure><img alt='Maskeron u Dobrinju'src=slike/dobrinj-5.jpg><figcaption>Maskeron u Dobrinju</figcaption></figure><figure><img alt='Naziv mjesta Dobrinj na glagoljici'src=slike/dobrinj-6.jpg><figcaption>Naziv mjesta Dobrinj na glagoljici</figcaption></figure>"},
  {name: "Klimno kod Solina ", lat: 45.15530, lon: 14.62025, desc: "<p>Blizu crkve sv. Klementa u Klimnu nalazi se glagoljiÄni natpis s prezimenom obitelji MalatestiniÄ‡ i godinom.</p><figure><img alt='GlagoljiÄni natpis u Klimnu'src=slike/solina-1.jpg><figcaption>GlagoljiÄni natpis u Klimnu</figcaption></figure><br><figure><img alt='Mural u Klimnu'src=slike/solina-2.jpg><figcaption>Mural u Klimnu</figcaption></figure>"},
  {name: "Park glagoljice", lat: 45.12800, lon: 14.56167, desc: "<p>U Gabonjinu se od 2010. godine nalazi Park glagoljice, koji promovira glagoljiÄnu baÅ¡tinu otoka Krka. Park se sastoji od 16 kamenih skulptura koje podsjeÄ‡aju na vaÅ¾ne dogaÄ‘aje iz mjesne i nacionalne proÅ¡losti i azbuÄna slova. Idejni je zaÄetnik parka Svetko UÅ¡alj (1937. â€“ 2019.).</p><figure><img alt='Gabonjin slika 1'src=slike/gabonjin-1.jpg> <br><img alt='Gabonjin slika 2'src=slike/gabonjin-2.jpg> <br><img alt='Gabonjin slika 3'src=slike/gabonjin-3.jpg> <br><img alt='Gabonjin slika 4'src=slike/gabonjin-4.jpg> <br><img alt='Gabonjin slika 5'src=slike/gabonjin-5.jpg> <br><img alt='Gabonjin slika 6'src=slike/gabonjin-6.jpg> <br><img alt='Gabonjin slika 7'src=slike/gabonjin-7.jpg> <br><img alt='Gabonjin slika 8'src=slike/gabonjin-8.jpg><figcaption>Prikaz glagoljaÅ¡kih slova u Gabonjinu</figcaption></figure>"},
  {name: "Put glagoljaÅ¡a", lat: 45.10781, lon: 14.56347, desc: "Do crkve sv. Petra od 2001. godine vodi Put glagoljaÅ¡a, dug oko 200 metara, edukativna staza s glagoljiÄnim slovima. I glagoljiÄna je slova uklesao Svetko UÅ¡alj. <figure><img alt='Gabonjin slika 9'src=slike/gabonjin-9.jpg><br><img alt='Gabonjin slika 10'src=slike/gabonjin-10.jpg> <br><img alt='Gabonjin slika 11'src=slike/gabonjin-11.jpg><figcaption>Put glagoljaÅ¡a</figcaption></figure>"}
];

// Dodavanje markera s popupovima
const waypoints = [];
points.forEach(p => {
  const marker = L.marker([p.lat, p.lon], { title: p.name }).addTo(map);
  marker.bindTooltip(p.name, { permanent: false, direction: 'top' });

  marker.on('click', function () {
    swal({
      title: p.name,
      html: p.desc,
      width: '600px',
      backdrop: 'rgba(0, 0, 0, 0.3)', // prozirna pozadina
      confirmButtonText: 'Zatvori'
    });
  });

  waypoints.push(L.latLng(p.lat, p.lon));
});
// âœ… Dodaj ovo OVDJE:

let currentGpxLayer = null;

// Boje po ruti
const routeColors = {
  "ruta-planinarenje.gpx": "green",
  "ruta-bicikl.gpx": "blue",
  "ruta-auto.gpx": "red"
};

// Funkcija za uÄitavanje GPX-a
function loadGpx(file) {
  if (currentGpxLayer) {
    map.removeLayer(currentGpxLayer);
  }

  currentGpxLayer = new L.GPX(file, {
    async: true,
    marker_options: {
      startIconUrl: null,
      endIconUrl: null,
      shadowUrl: null
    },
    polyline_options: {
      color: routeColors[file] || "black",
      weight: 4,
      opacity: 0.8
    }
  }).on('loaded', function(e) {
    map.fitBounds(e.target.getBounds());
  }).addTo(map);
}
function updateRouteInfo(selected) {
  const info = {
    "ruta-planinarenje.gpx": "Duljina rute: 127 km, Vrijeme: 38 h",
    "ruta-bicikl.gpx": "Duljina rute: 117 km, Vrijeme: 8:30 h",
    "ruta-auto.gpx": "Duljina rute: 133 km, Vrijeme: 3:30 h"
  };
  document.getElementById("route-info").textContent = info[selected] || "";
}

// Pokretanje prve (defaultne) rute
loadGpx("ruta-planinarenje.gpx");



// Reakcija na promjenu izbornika
document.getElementById("routeSelector").addEventListener("change", function() {
 
  if (window.autoRoute) {
    map.removeControl(window.autoRoute);
    window.autoRoute = null;
  }
  const selected = this.value;
loadGpx(selected);
updateRouteInfo(selected);

});

updateRouteInfo("ruta-planinarenje.gpx");
L.control.locate = function(opts) {
  const options = opts || {};
  const control = L.control({ position: 'topleft' });

  control.onAdd = function(map) {
    const container = L.DomUtil.create('div', 'leaflet-bar leaflet-control');
    const button = L.DomUtil.create('a', '', container);
    button.innerHTML = 'ğŸ“';
    button.href = '#';
    button.title = 'PrikaÅ¾i moju lokaciju';

    // Tvoja ikona ÄovjeÄuljka
    const userIcon = L.icon({
      iconUrl: 'ikona.png',
      iconSize: [32, 32],
      iconAnchor: [16, 32],
      popupAnchor: [0, -32]
    });

    L.DomEvent.on(button, 'click', function(e) {
      L.DomEvent.stopPropagation(e);
      L.DomEvent.preventDefault(e);

      if (!navigator.geolocation) {
        alert('Geolokacija nije podrÅ¾ana u ovom pregledniku.');
        return;
      }

      navigator.geolocation.getCurrentPosition(function(position) {
        const latlng = L.latLng(position.coords.latitude, position.coords.longitude);
        L.marker(latlng, { icon: userIcon })
          .addTo(map)
          .bindPopup('Vi ste ovdje!')
          .openPopup();
        map.setView(latlng, 14);
      }, function() {
        alert('Ne mogu dohvatiti vaÅ¡u lokaciju. Provjerite je li omoguÄ‡en pristup lokaciji na ureÄ‘aju ili pregledniku.');
      });
    });

    return container;
  };

  return control;
};
L.control.locate().addTo(map);

</script>
</body>
</html>
