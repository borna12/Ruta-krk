<!DOCTYPE html>
<html>
<head>
  <title>Planinarska ruta Krk</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; }
    .leaflet-routing-container { display: none; } /* skriva routing panel */
  </style>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.5.1/gpx.min.js"></script>
 <link rel="icon" type="image/png" href="./favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>
<body>

<div id="map"></div>
<div id="route-info" class="leaflet-control route-info"></div>


    <script src="js/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="css/sweetalert2.min.css">
  <link rel="stylesheet" href="css/stil.css" />


<script>
const map = L.map('map').setView([45.077, 14.6], 11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: ' <a href="https://stin.hr/" target="_blank"><img src="https://stin.hr/wp-content/uploads/2021/02/cropped-zaposlenici-18-192x192.png" alt="Staroslavenski institut" style="height: 14px; vertical-align: middle;"> Staroslavenski institut</a>'
}).addTo(map);
map.attributionControl.setPrefix('Leaflet | © <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a>');

const RouteSelectorControl = L.Control.extend({
  onAdd: function(map) {
    const div = L.DomUtil.create('div', 'leaflet-control route-select');
    div.innerHTML = `
      <select id="routeSelector">
        <option value="ruta-planinarenje.gpx">Pješke</option>
        <option value="ruta-bicikl.gpx">Bicikl</option>
        <option value="ruta-auto.gpx">Auto</option>
      </select>
    `;
    L.DomEvent.disableClickPropagation(div);
    return div;
  }
});
map.addControl(new RouteSelectorControl({ position: 'topright' }));
// Točke s opisima
const points = [
  {name: "Župna crkva Uznesenja Blažene Djevice Marije", lat: 45.21284, lon: 14.55371, desc: '<p>Omišalj je mjesto nekoliko glagoljičnih spomenika. Župna crkva Uznesenja Blažene Djevice Marije, trobrodna romanička crkva s prijelaza iz 12. u 13. st. mjesto je nekoliko glagoljičnih natpisa koji svjedoče o gradnji pojedinih njezinih dijelova. Na renesansnome zvoniku dovršenome 1536. godine također je glagoljični natpis. </p><p>U Omišlju se nalazi i lapidarij  u kojemu su i neki glagoljični natpisi. Ističe se nadgrobna ploča s glagoljičnim natpisom i reljefnim prikazom znakova opatske časti iz 1477.</p><figure><img alt="Glagoljični natpis o gradnji Kaštela u Omišlju"src=slike/omisalj-1.jpg><figcaption>Glagoljični natpis o gradnji Kaštela u Omišlju</figcaption></figure><figure><img alt="Glagoljični natpisi u Omišlju"src=slike/omisalj-2.jpg> <img alt="Glagoljični natpisi u Omišlju"src=slike/omisalj-3.jpg><figcaption>Glagoljični natpisi u Omišlju</figcaption></figure><figure><img alt="Rozeta župne crkve s glagoljičnim natpisom"src=slike/omisalj-4.jpg><figcaption>Rozeta župne crkve s glagoljičnim natpisom</figcaption></figure>'},
  {name: "Samostan sv. Marije Magdalene u Poratu", lat: 45.12353, lon: 14.49353, desc: "<p>U Portu se nalazi franjevački Samostan sv. Marije Magdalene, čija knjižnica čuva niz glagoljičnih rukopisa iz 17. i 18. stoljeća. U otvorenome predvorju nalazi se glagoljični lapidarij koji je osmislio Dubašljanin Branko Fučić, jedan od najpoznatijih proučavatelja hrvatskoga glagoljaštva. Ispred samostana postavljena je njegova bista. Lapidarij sadržava 14 odljeva najvažnijih i najpoznatijih glagoljičnih epigrafskih spomenika.</p><figure><img alt='Lapidarij u Samostanu sv. Marije Magdalene u Portu' src=slike/porat-1.jpg><figcaption>Lapidarij u Samostanu sv. Marije Magdalene u Portu</figcaption></figure><figure><img alt='Bista Branka Fučića' src=slike/porat-2.jpg><figcaption>Bista Branka Fučića</figcaption></figure>"},
  {name: "Samostan sv. Marije u Glavotoku", lat: 45.09128, lon: 14.43428, desc: "<p>U Glavotoku se nalazi Samostan sv. Marije, samostan franjevaca trećoredaca. U samostanu se čuvao i jedan primjerak <em>Prvotiska</em>, koji se danas čuva u Zagrebu, u samostanu na Ksaveru. Na samostanu se nalazi sunčani sat koji je izradio važan hrvatski glagoljaš Dragutin Antun Parčić. U samostanu je bila i Parčićeva tiskara.</p><figure><img alt='Samostan sv. Marije u Glavotoku' src=slike/glavotoku-1.jpg><br><img alt='Samostan sv. Marije u Glavotoku' src=slike/glavotoku-2.jpg><figcaption>Samostan sv. Marije u Glavotoku</figcaption></figure><figure><img alt='Sunčani sat koji je izradio Dragutin Antun Parčić' src=slike/glavotoku-3.jpg><figcaption>Sunčani sat koji je izradio Dragutin Antun Parčić</figcaption></figure>"},
  {name: "Krčki natpis - kanonička kuća", lat: 45.02657, lon: 14.57521, desc: "<p><em>Krčki natpis</em> jedan je od najstarijih hrvatskoglagoljičnih epigrafskih spomenika. Datira se u 11. stoljeće. Na kamenu su uklesana imena graditelja benediktinskoga samostana ili crkve: opat Maj i slavenski redovnici Radonja, Dobroslav, Rugota (tekst glasi: <em>se zida maĵъ opatъ i radonê rugota dobroslav[ъ]</em>). Natpis se nalazi na stubištu kanoničke kuće u Krku (Ulica dr. Dinka Vitezića 7, približne koordinate: 45.026566734127165, 14.575205164180534). Godine 1902. u Krku je osnovana Staroslavenska akademija. Začetnik je akademije bio Antun Mahnić. U Krku se u biskupskoj palači nalazila i tiskara Kurykta (koordinate: 45.02559360895806, 14.575664918434729), u kojoj je tiskan Vjesnik Staroslavenske akademije. Tiskaru je 1899. također osnovao Antun Mahnić.</p><figure><img alt='Krčki natpis' src=slike/krk-1.jpg><figcaption>Krčki natpis</figcaption></figure><br><figure><img alt='Krčki natpis' src=slike/krk-2.jpg><figcaption><p>Tiskara Kurykta – slika preuzeta sa stranice <a href='https://www.adriaforum.com/kroatien/threads/2337-krk-stadt-tiskara-kurykta-bisch%C3%B6ftliche-druckerei.84421/'>https://www.adriaforum.com/kroatien/threads/2337-krk-stadt-tiskara-kurykta-bisch%C3%B6ftliche-druckerei.84421/</a></p></figcaption></figure>"},
  {name: "Otok Košljun", lat: 45.02605, lon: 14.61945, desc: "Košljun je otočić koji se nalazi ispred mjesta Punat. Premda otočić Košljun nije bio glagoljaški, na njemu se čuva primjerak <em>Prvotiska. </em>Na njemu se nalazi franjevački samostan.<br><figure><img alt='Otok Košljun' src=slike/kosljun-1.jpg><figcaption> Otočić Košljun – slika preuzeta sa stranice <a href='https://www.info-krk.com/krk/kultura/73/kosljun'>https://www.info-krk.com/krk/kultura/73/kosljun</a></figcaption></figure>"},
  {name: "Crkva sv. Lucije u Jurandvoru", lat: 44.97791, lon: 14.73826, desc: "<p>U mjestu Jurandvor, u crkvici sv. Lucije nalazila se <em>Bašćanska ploča </em>– najvažniji i jedan od najstarijih hrvatskoglagoljičnih epigrafskih spomenika. Pisana je prijelaznim tipom glagoljice s oble na uglatu. Služila je kao lijevi plutej u crkvenoj pregradi. Natpis ima 13 redova, počinje invokacijom, a zatim slijedi zapis popa Držihe o tome da je kralj Zvonimir darovao ledinu crkvi sv. Lucije. Navode se i svjedoci toga darivanja. Nakon toga opat Dobrovit svjedoči kako je s devetoro braće zidao crkvu u vrijeme kneza Kosmata. Na ploči se prvi put na hrvatskome jeziku spominje ime kralja Zvonimira i hrvatskoga naroda. Danas se <em>Bašćanska ploča</em> čuva u atriju Hrvatske akademije znanosti i umjetnosti u Zagrebu.</p><figure><img alt='Bašćanska ploča' src=slike/jurandvor-1.jpg><figcaption>Bašćanska ploča</figcaption></figure><figure><img alt='Crkvica sv. Lucije u Jurandvoru' src=slike/jurandvor-2.jpg><figcaption>Crkvica sv. Lucije u Jurandvoru</figcaption></figure><figure><img alt='Glagoljično slovo s u Jurandvoru' src=slike/jurandvor-3.jpg><figcaption>Glagoljično slovo <em>s </em>u Jurandvoru</figcaption></figure>"},
  {name: "Bašćanska staza glagoljice", lat: 44.96163, lon: 14.74718, desc: "Bašćanska staza glagoljice sastoji se od 34 spomenika od prijevoja Treskavac kroz Bašćansku dolinu. Izradu staze pokrenulo je Društvo Sinjali. Staza je otvorena 2009.<figure><img alt='Glagoljično slovo a'src=slike/bascanska-staza-1.jpg><figcaption>Glagoljično slovo <em>a</em></figcaption></figure><figure><img alt='Glagoljična slova ž i e'src=slike/bascanska-staza-2.jpg><figcaption>Glagoljična slova <em>ž </em>i <em>e</em></figcaption></figure><figure><img alt='Glagoljično slovo l'src=slike/bascanska-staza-3.jpg><figcaption>Glagoljično slovo <em>l</em></figcaption></figure><figure><img alt='Glagoljična slova k i d'src=slike/bascanska-staza-4.jpg><figcaption>Glagoljična slova <em>k </em>i <em>d</em></figcaption></figure><figure><img alt='Glagoljično slovo b'src=slike/bascanska-staza-5.jpg><figcaption>Glagoljično slovo <em>b</em></figcaption></figure><figure><img alt='Glagoljično slovo o'src=slike/bascanska-staza-6.jpg><figcaption>Glagoljično slovo <em>o</em></figcaption></figure><figure><img alt='Spomenik Društvu Sinjali'src=slike/bascanska-staza-7.jpg><figcaption>Spomenik Društvu Sinjali, koje je pokrenulo stazu</figcaption></figure><figure><img alt='Glagoljično slovo v'src=slike/bascanska-staza-8.jpg><figcaption>Glagoljično slovo <em>v</em></figcaption></figure><figure><img alt='Glagoljično slovo p'src=slike/bascanska-staza-9.jpg><figcaption>Glagoljično slovo <em>p</em></figcaption></figure><figure><img alt='Glagoljično slovo h'src=slike/bascanska-staza-10.jpg><figcaption>Glagoljično slovo <em>h</em></figcaption></figure><figure><img alt='Glagoljično slovo z'src=slike/bascanska-staza-11.jpg><figcaption>Glagoljično slovo <em>z</em></figcaption></figure><figure><img alt='Glagoljično slovo n'src=slike/bascanska-staza-12.jpg><figcaption>Glagoljično slovo <em>n</em></figcaption></figure><figure><img alt='Glagoljično slovo š'src=slike/bascanska-staza-13.jpg><figcaption>Glagoljično slovo <em>š</em></figcaption></figure>"},
  {name: "Vrbnik", lat: 45.07704747366301, lon: 14.677571209700712, desc: "<p>U Vrbniku je više glagoljičnih natpisa, primjerice, na kapelici sv. Marije Male ili Blažene Djevice Marije od Porođenja uz župnu crkvu uznesenja Blažene Djevice Marije nalazi se glagoljični natpis iz 1505. o izgradnji crkve. U Vrbniku se nalazi i kip poznatoga glagoljaša Blaža Baromića . Godine 2003. otvorena je spomen-tiskara Blaža Baromića i Dragutina Parčića. U Župnome uredu nalaze se važni glagoljični rukopisi – primjerice, vrbnički misali i brevijari.</p><figure><img alt='Glagoljični natpisi u Vrbniku'src=slike/vrbnik-1.jpg><figcaption>Glagoljični natpisi u Vrbniku</figcaption></figure><figure><img alt='Glagoljični spomenici u Vrbniku'src=slike/vrbnik-2.jpg><br><img alt='Glagoljični spomenici u Vrbniku'src=slike/vrbnik-3.jpg><br><img alt='Glagoljični spomenici u Vrbniku'src=slike/vrbnik-4.jpg><br><img alt='Glagoljični spomenici u Vrbniku'src=slike/vrbnik-6.jpg><figcaption>Glagoljični spomenici u Vrbniku</figcaption></figure><figure><img alt='Blaž Baromić'src=slike/vrbnik-1.jpg><figcaption>Blaž Baromić</figcaption></figure>"},
  {name: "Dobrinj", lat: 45.12602, lon: 14.61343, desc: "U crkvi sv. Vida nema glagoljice, ali je s njom povezana glagoljična <em>Darovnica slavnoga Dragoslava</em>, jedan od najvažnijih starohrvatskih diplomatičkih zapisa, koji je napisan kurzivnom glagoljicom. Glagoljični se natpisi nalaze na župnoj crkvi sv. Stjepana i u gradu. Prvi prijepis <em>Darovnice</em> čuva se u sakralnoj muzejskoj zbirci u Dobrinju, koja je otvorena 1981.<figure><img alt='crkva sv. Vida 'src=slike/dobrinj-1.jpg><br><img alt='crkva sv. Vida'src=slike/dobrinj-2.jpg><figcaption>crkva sv. Vida</figcaption></figure><figure><img alt='Glagoljični natpis na župnoj crkvi sv. Stjepana u Dobrinju'src=slike/dobrinj-3.jpg><figcaption>Glagoljični natpis na župnoj crkvi sv. Stjepana u Dobrinju</figcaption></figure><figure><img alt='Glagoljični natpis u Dobrinju'src=slike/dobrinj-4.jpg><figcaption>Glagoljični natpis u Dobrinju</figcaption></figure><figure><img alt='Maskeron u Dobrinju'src=slike/dobrinj-5.jpg><figcaption>Maskeron u Dobrinju</figcaption></figure><figure><img alt='Naziv mjesta Dobrinj na glagoljici'src=slike/dobrinj-6.jpg><figcaption>Naziv mjesta Dobrinj na glagoljici</figcaption></figure>"},
  {name: "Klimno kod Solina ", lat: 45.15530, lon: 14.62025, desc: "<p>Blizu crkve sv. Klementa u Klimnu nalazi se glagoljični natpis s prezimenom obitelji Malatestinić i godinom.</p><figure><img alt='Glagoljični natpis u Klimnu'src=slike/solina-1.jpg><figcaption>Glagoljični natpis u Klimnu</figcaption></figure><br><figure><img alt='Mural u Klimnu'src=slike/solina-2.jpg><figcaption>Mural u Klimnu</figcaption></figure>"},
  {name: "Park glagoljice", lat: 45.12800, lon: 14.56167, desc: "<p>U Gabonjinu se od 2010. godine nalazi Park glagoljice, koji promovira glagoljičnu baštinu otoka Krka. Park se sastoji od 16 kamenih skulptura koje podsjećaju na važne događaje iz mjesne i nacionalne prošlosti i azbučna slova. Idejni je začetnik parka Svetko Ušalj (1937. – 2019.).</p><figure><img alt='Gabonjin slika 1'src=slike/gabonjin-1.jpg> <br><img alt='Gabonjin slika 2'src=slike/gabonjin-2.jpg> <br><img alt='Gabonjin slika 3'src=slike/gabonjin-3.jpg> <br><img alt='Gabonjin slika 4'src=slike/gabonjin-4.jpg> <br><img alt='Gabonjin slika 5'src=slike/gabonjin-5.jpg> <br><img alt='Gabonjin slika 6'src=slike/gabonjin-6.jpg> <br><img alt='Gabonjin slika 7'src=slike/gabonjin-7.jpg> <br><img alt='Gabonjin slika 8'src=slike/gabonjin-8.jpg><figcaption>Prikaz glagoljaških slova u Gabonjinu</figcaption></figure>"},
  {name: "Put glagoljaša", lat: 45.10781, lon: 14.56347, desc: "Do crkve sv. Petra od 2001. godine vodi Put glagoljaša, dug oko 200 metara, edukativna staza s glagoljičnim slovima. I glagoljična je slova uklesao Svetko Ušalj. <figure><img alt='Gabonjin slika 9'src=slike/gabonjin-9.jpg><br><img alt='Gabonjin slika 10'src=slike/gabonjin-10.jpg> <br><img alt='Gabonjin slika 11'src=slike/gabonjin-11.jpg><figcaption>Put glagoljaša</figcaption></figure>"}
];

// Dodavanje markera s popupovima
const waypoints = [];
points.forEach(p => {
  const marker = L.marker([p.lat, p.lon], { title: p.name }).addTo(map);
  marker.bindTooltip(p.name, { permanent: false, direction: 'top' });

  marker.on('click', function () {
    swal({
      title: p.name,
      html: p.desc,
      width: '600px',
      backdrop: 'rgba(0, 0, 0, 0.3)', // prozirna pozadina
      confirmButtonText: 'Zatvori'
    });
  });

  waypoints.push(L.latLng(p.lat, p.lon));
});
// ✅ Dodaj ovo OVDJE:

let currentGpxLayer = null;

// Boje po ruti
const routeColors = {
  "ruta-planinarenje.gpx": "green",
  "ruta-bicikl.gpx": "blue",
  "ruta-auto.gpx": "red"
};

// Funkcija za učitavanje GPX-a
function loadGpx(file) {
  if (currentGpxLayer) {
    map.removeLayer(currentGpxLayer);
  }

  currentGpxLayer = new L.GPX(file, {
    async: true,
    marker_options: {
      startIconUrl: null,
      endIconUrl: null,
      shadowUrl: null
    },
    polyline_options: {
      color: routeColors[file] || "black",
      weight: 4,
      opacity: 0.8
    }
  }).on('loaded', function(e) {
    map.fitBounds(e.target.getBounds());
  }).addTo(map);
}
function updateRouteInfo(selected) {
  const info = {
    "ruta-planinarenje.gpx": "Duljina rute: 127 km, Vrijeme: 38 h",
    "ruta-bicikl.gpx": "Duljina rute: 117 km, Vrijeme: 8:30 h",
    "ruta-auto.gpx": "Duljina rute: 133 km, Vrijeme: 3:30 h"
  };
  document.getElementById("route-info").textContent = info[selected] || "";
}

// Pokretanje prve (defaultne) rute
loadGpx("ruta-planinarenje.gpx");



// Reakcija na promjenu izbornika
document.getElementById("routeSelector").addEventListener("change", function() {
 
  if (window.autoRoute) {
    map.removeControl(window.autoRoute);
    window.autoRoute = null;
  }
  const selected = this.value;
loadGpx(selected);
updateRouteInfo(selected);

});

updateRouteInfo("ruta-planinarenje.gpx");

</script>
</body>
</html>
